<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Preview - Markdown to HTML</title>
		<style>
			/* Reset and base styles */
			* {
				box-sizing: border-box;
			}

			body {
				margin: 0;
				font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
					"Helvetica Neue", Arial, sans-serif;
				background-color: #f9fafb;
				min-height: 100vh;
				line-height: 1.6;
			}

			/* Header styles */
			header {
				background-color: white;
				border-bottom: 1px solid #e5e7eb;
				box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
			}

			.header-container {
				max-width: 1024px;
				margin: 0 auto;
				padding: 0 1rem;
			}

			.header-content {
				display: flex;
				flex-direction: column;
				justify-content: space-between;
				align-items: flex-start;
				padding: 1rem 0;
				gap: 0.75rem;
			}

			.header-title {
				margin: 0;
				font-size: 1.25rem;
				font-weight: bold;
				color: #111827;
			}

			.header-subtitle {
				margin: 0;
				font-size: 0.75rem;
				color: #6b7280;
			}

			.header-buttons {
				display: flex;
				flex-direction: column;
				gap: 0.5rem;
				width: 100%;
			}

			.btn {
				padding: 0.5rem 1rem;
				border-radius: 0.5rem;
				font-weight: 500;
				text-decoration: none;
				border: none;
				cursor: pointer;
				font-size: 0.875rem;
				text-align: center;
				transition: background-color 0.2s;
			}

			.btn-gray {
				background-color: #4b5563;
				color: white;
			}

			.btn-gray:hover {
				background-color: #374151;
			}

			.btn-blue {
				background-color: #2563eb;
				color: white;
			}

			.btn-blue:hover {
				background-color: #1d4ed8;
			}

			/* Main content */
			main {
				max-width: 1024px;
				margin: 0 auto;
				padding: 1rem;
			}

			.content-card {
				background-color: white;
				border-radius: 0.5rem;
				border: 1px solid #e5e7eb;
				box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
				padding: 1rem;
			}

			.empty-state {
				text-align: center;
				padding: 2rem 0;
			}

			.empty-icon {
				font-size: 2.5rem;
				color: #9ca3af;
				margin-bottom: 1rem;
			}

			.empty-title {
				font-size: 1.25rem;
				font-weight: bold;
				color: #111827;
				margin: 0 0 0.5rem 0;
			}

			.empty-text {
				color: #6b7280;
				margin: 0 0 1rem 0;
				font-size: 0.875rem;
			}

			/* Source info */
			.source-info {
				margin-top: 1rem;
				background-color: #f3f4f6;
				border-radius: 0.5rem;
				padding: 0.75rem;
			}

			.source-title {
				font-size: 1rem;
				font-weight: 600;
				color: #374151;
				margin: 0 0 0.5rem 0;
			}

			.source-grid {
				display: grid;
				grid-template-columns: 1fr;
				gap: 0.5rem;
				font-size: 0.75rem;
				color: #6b7280;
			}

			.source-item span:first-child {
				font-weight: 500;
			}

			/* Responsive design */
			@media (min-width: 640px) {
				.header-container {
					padding: 0 1.5rem;
				}

				.header-content {
					flex-direction: row;
					align-items: center;
				}

				.header-title {
					font-size: 1.5rem;
				}

				.header-subtitle {
					font-size: 0.875rem;
				}

				.header-buttons {
					flex-direction: row;
					gap: 0.75rem;
					width: auto;
				}

				.btn {
					font-size: 1rem;
				}

				main {
					padding: 2rem 1.5rem;
				}

				.content-card {
					padding: 1.5rem;
				}

				.empty-state {
					padding: 4rem 0;
				}

				.empty-icon {
					font-size: 3.75rem;
				}

				.empty-title {
					font-size: 1.5rem;
				}

				.empty-text {
					font-size: 1rem;
					margin-bottom: 1.5rem;
				}

				.source-info {
					margin-top: 1.5rem;
					padding: 1rem;
				}

				.source-title {
					font-size: 1.125rem;
				}

				.source-grid {
					grid-template-columns: repeat(2, 1fr);
					gap: 1rem;
					font-size: 0.875rem;
				}
			}

			@media (min-width: 1024px) {
				.header-container {
					padding: 0 2rem;
				}

				main {
					padding: 2rem;
				}

				.content-card {
					padding: 2rem;
				}

				.source-grid {
					grid-template-columns: repeat(3, 1fr);
				}
			}

			/* Preserve default HTML styling for markdown content */
			/* The .markdown-content class doesn't need any styles - 
			   it preserves browser defaults for HTML elements */

			/* Optional: Add some basic improvements to markdown content */
			.markdown-content img {
				max-width: 100%;
				height: auto;
				border-radius: 0.5rem;
				box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
			}

			.markdown-content pre {
				background-color: #1f2937;
				color: white;
				padding: 1rem;
				border-radius: 0.5rem;
				overflow-x: auto;
			}

			.markdown-content code:not(pre code) {
				background-color: #f3f4f6;
				padding: 0.125rem 0.25rem;
				border-radius: 0.25rem;
				font-size: 0.875em;
			}

			.markdown-content blockquote {
				border-left: 4px solid #3b82f6;
				padding-left: 1rem;
				margin-left: 0;
				font-style: italic;
				color: #6b7280;
				background-color: #f9fafb;
				padding: 0.5rem 1rem;
				border-radius: 0 0.25rem 0.25rem 0;
			}

			.markdown-content table {
				width: 100%;
				border-collapse: collapse;
				margin: 1rem 0;
			}

			.markdown-content th,
			.markdown-content td {
				border: 1px solid #d1d5db;
				padding: 0.5rem 1rem;
				text-align: left;
			}

			.markdown-content th {
				background-color: #f3f4f6;
				font-weight: 600;
			}
		</style>
	</head>
	<body>
		<!-- Header -->
		<header>
			<div class="header-container">
				<div class="header-content">
					<div>
						<h1 class="header-title">Preview</h1>
						<p class="header-subtitle">Rendered markdown output</p>
					</div>
					<div class="header-buttons">
						<a href="/" class="btn btn-gray">‚Üê Back to Editor</a>
						<button id="printBtn" class="btn btn-blue">
							Print / Save as PDF
						</button>
					</div>
				</div>
			</div>
		</header>

		<!-- Main Content -->
		<main>
			<div class="content-card">
				{{if .HTML}}
				<div class="markdown-content">{{.HTML}}</div>
				{{else}}
				<div class="empty-state">
					<div class="empty-icon">üìù</div>
					<h2 class="empty-title">No Content to Preview</h2>
					<p class="empty-text">
						Convert some markdown content first to see the preview.
					</p>
					<a href="/" class="btn btn-blue">Go to Editor</a>
				</div>
				{{end}}
			</div>

			{{if .HTML}}
			<!-- Source Information -->
			<div class="source-info">
				<h3 class="source-title">Source Information</h3>
				<div class="source-grid">
					<div class="source-item">
						<span>Generated:</span>
						<span id="timestamp"></span>
					</div>
					<div class="source-item">
						<span>Content Length:</span>
						<span>{{len .HTML}} characters</span>
					</div>
					<div class="source-item">
						<span>Markdown Source:</span>
						<span>{{len .Markdown}} characters</span>
					</div>
				</div>
			</div>
			{{end}}
		</main>

		<script>
			// Set current timestamp
			document.addEventListener("DOMContentLoaded", function () {
				const timestampElement = document.getElementById("timestamp");
				if (timestampElement) {
					const now = new Date();
					timestampElement.textContent = now.toLocaleString();
				}
			});

			// Print functionality
			document
				.getElementById("printBtn")
				?.addEventListener("click", function () {
					// Hide header and footer for printing
					const header = document.querySelector("header");
					const sourceInfo = document.querySelector(".source-info");

					if (header) header.style.display = "none";
					if (sourceInfo) sourceInfo.style.display = "none";

					// Print
					window.print();

					// Restore header and footer after printing
					setTimeout(() => {
						if (header) header.style.display = "block";
						if (sourceInfo) sourceInfo.style.display = "block";
					}, 1000);
				});

			// Handle keyboard shortcuts
			document.addEventListener("keydown", function (e) {
				// Ctrl/Cmd + P for print
				if ((e.ctrlKey || e.metaKey) && e.key === "p") {
					e.preventDefault();
					document.getElementById("printBtn")?.click();
				}

				// Escape key to go back to editor
				if (e.key === "Escape") {
					window.location.href = "/";
				}
			});
		</script>
	</body>
</html>
